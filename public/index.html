<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Watch Video</title>

<script src="https://telegram.org/js/telegram-web-app.js?59"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}

/* ================= PLAYER ROOT ================= */
#player{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ================= VIDEO BOX ================= */
#videoBox{
  position:relative;
  width:100%;
  max-width:420px;
  aspect-ratio:9/16;
  background:#000;
  border-radius:14px;
  overflow:hidden;
}

/* FULLSCREEN → USE FULL SCREEN SPACE */
.fullscreen #videoBox{
  width:100vw;
  height:100vh;
  max-width:none;
  aspect-ratio:auto;
  border-radius:0;
}

/* ================= IFRAME ================= */
#videoFrame{
  width:100%;
  height:100%;
  border:none;
  background:#000;
  transform-origin:center center;
}

/* NORMAL */
.normal #videoFrame{
  transform:scale(1.03);
}

/* FULLSCREEN → BIGGER + ROTATED */
.fullscreen #videoFrame{
  transform:rotate(90deg) scale(1.65);
}

/* ================= CONTROLS ================= */
.btn{
  position:fixed;
  padding:7px 12px;
  border:none;
  border-radius:999px;
  background:rgba(0,0,0,.7);
  color:#fff;
  font-size:14px;
  font-weight:600;
  z-index:1000000;
}

/* BACK BUTTON → TOP LEFT (RED BOX) */
#btnBack{
  top:64px;   /* below Telegram header */
  left:16px;
}

/* NORMAL BUTTON → RIGHT MIDDLE (RED BOX) */
#btnNormal{
  right:16px;
  top:50%;
  transform:translateY(-50%);
}
</style>
</head>

<body>

<div id="player" class="normal">

  <div id="videoBox">
    <iframe
      id="videoFrame"
      allow="autoplay; fullscreen"
      src="https://playterabox.com/embed/player?url=YOUR_TERABOX_LINK_HERE">
    </iframe>
  </div>

  <!-- FULLSCREEN CONTROLS -->
  <button id="btnBack" class="btn" onclick="goBack()">✕ Close</button>
  <button id="btnNormal" class="btn" onclick="toggleFullscreen()">⟳ Normal</button>

</div>

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

const player = document.getElementById("player");
const btnNormal = document.getElementById("btnNormal");

/* TOGGLE FULLSCREEN */
function toggleFullscreen(){
  if(player.classList.contains("fullscreen")){
    exitFullscreen();
  }else{
    enterFullscreen();
  }
}

function enterFullscreen(){
  player.classList.remove("normal");
  player.classList.add("fullscreen");
  btnNormal.textContent = "⟳ Normal";

  tg.requestFullscreen?.();
  tg.lockOrientation?.();
}

function exitFullscreen(){
  player.classList.remove("fullscreen");
  player.classList.add("normal");
  btnNormal.textContent = "⛶ Fullscreen";

  tg.exitFullscreen?.();
  tg.unlockOrientation?.();
}

/* BACK */
function goBack(){
  exitFullscreen();
  tg.close?.();
}
</script>

</body>
</html>
