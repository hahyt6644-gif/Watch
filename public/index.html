<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<title>Video Player</title>

<script src="https://telegram.org/js/telegram-web-app.js?59"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}

html,body{
  width:100%;
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:system-ui,-apple-system,Segoe UI,sans-serif;
}

/* ---------- PLAYER ROOT ---------- */
#player{
  position:fixed;
  inset:0;
  background:#000;
}

/* ---------- RED BOX (SAFE AREA) ---------- */
#safeBox{
  position:absolute;
  top:48px;       /* Telegram header height */
  bottom:0;
  left:0;
  right:0;
  background:#000;
  overflow:hidden;
}

/* ---------- VIDEO ---------- */
#playerFrame{
  position:absolute;
  width:100%;
  height:100%;
  border:none;
  background:#000;
}

/* ---------- FULLSCREEN ROTATION ---------- */
#safeBox.fullscreen #playerFrame{
  width:100vh;
  height:100vw;
  transform:rotate(90deg);
  transform-origin:center;
  top:50%;
  left:50%;
  translate:-50% -50%;
}

/* ---------- CONTROLS ---------- */
.ctrl{
  position:absolute;
  background:rgba(0,0,0,.6);
  border:none;
  color:#fff;
  font-size:20px;
  padding:6px 10px;
  border-radius:8px;
  z-index:10;
}

/* Back button (TOP LEFT) */
#btnBack{
  top:10px;
  left:10px;
}

/* Fullscreen / Normal (BOTTOM RIGHT) */
#btnToggle{
  bottom:10px;
  right:10px;
}

/* ---------- LOADER ---------- */
#loader{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  font-size:14px;
  z-index:5;
}
</style>
</head>

<body>

<div id="player">
  <div id="safeBox">

    <div id="loader">Loading…</div>

    <iframe
      id="playerFrame"
      allow="autoplay; fullscreen"
      src="https://playterabox.com/embed/player?url=https://example.com/video.mp4">
    </iframe>

    <button id="btnBack" class="ctrl" onclick="goBack()">✕</button>
    <button id="btnToggle" class="ctrl" onclick="toggleScreen()">⤢</button>

  </div>
</div>

<script>
const tg = Telegram.WebApp;
tg.ready();
tg.expand();

let isFullscreen = false;

function toggleScreen(){
  if(isFullscreen){
    exitFullscreen();
  }else{
    enterFullscreen();
  }
}

function enterFullscreen(){
  tg.requestFullscreen?.();
  tg.lockOrientation?.();
  safeBox.classList.add("fullscreen");
  isFullscreen = true;
  btnToggle.textContent = "⤢"; // normal icon
}

function exitFullscreen(){
  tg.exitFullscreen?.();
  tg.unlockOrientation?.();
  safeBox.classList.remove("fullscreen");
  isFullscreen = false;
  btnToggle.textContent = "⤢"; // fullscreen icon
}

function goBack(){
  exitFullscreen();
  tg.close();
}

window.onload = ()=>{
  setTimeout(()=>loader.style.display="none",1000);
};
</script>

</body>
</html>
